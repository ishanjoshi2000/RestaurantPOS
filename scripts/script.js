const data={
    "products": [

        {
            "name": "Margherita Pizza",
            "price": 40,
            "image": "../images/food/img1.jpg",
            "category": "Pizza"
            },
            {
            "name": "Chicken Alfredo Pasta",
            "price": 10,
            "image": "../images/food/img2.jpg",
            "category": "Pasta"
            },
            {
            "name": "Grilled Chicken Sandwich",
            "price": 50,
            "image": "../images/food/img3.jpg",
            "category": "Sandwiches"
            },
            {
            "name": "Caesar Salad",
            "price": 50,
            "image": "../images/food/img4.jpg",
            "category": "Salads"
            },
            {
            "name": "Cheeseburger",
            "price": 100,
            "image": "../images/food/img5.jpg",
            "category": "Burgers"
            },
            {
            "name": "Fish and Chips",
            "price": 500,
            "image": "../images/food/img6.jpg",
            "category": "Seafood"
            },
            {
            "name": "Beef Tacos",
            "price": 700,
            "image": "../images/food/img7.jpg",
            "category": "Tacos"
            },
            {
            "name": "Vegetarian Sushi Roll",
            "price": 90,
            "image": "../images/food/img8.jpg",
            "category": "Sushi"
            },
            {
            "name": "Chicken Wings",
            "price": 180,
            "image": "../images/food/img9.jpg",
            "category": "Appetizers"
            },
            {
            "name": "Chocolate Brownie Sundae",
            "price": 600,
            "image": "../images/food/img10.jpg",
            "category": "Desserts"
            },
            {
            "name": "Mushroom Risotto",
            "price": 110,
            "image": "../images/food/img11.jpg",
            "category": "Risotto"
            },
            {
            "name": "BBQ Ribs",
            "price": 1400,
            "image": "../images/food/img12.jpg",
            "category": "BBQ"
            },
            {
            "name": "Philly Cheesesteak",
            "price": 1000,
            "image": "../images/food/img13.jpg",
            "category": "Sandwiches"
            },
            {
            "name": "Shrimp Scampi",
            "price": 130,
            "image": "../images/food/img14.jpg",
            "category": "Seafood"
            },
            {
            "name": "Vegetable Stir-Fry",
            "price": 70,
            "image": "../images/food/img15.jpg",
            "category": "Stir Fry"
            },
            {
            "name": "Chicken Quesadilla",
            "price": 100,
            "image": "../images/food/img16.jpg",
            "category": "Appetizers"
            },
            {
            "name": "Caprese Salad",
            "price": 800,
            "image": "../images/food/img17.jpg",
            "category": "Salads"
            },
            {
            "name": "Eggplant Parmesan",
            "price": 1100,
            "image": "../images/food/img18.jpg",
            "category": "Vegetarian"
            },
            {
            "name": "Chicken Caesar Wrap",
            "price": 900,
            "image": "../images/food/img19.jpg",
            "category": "Wraps"
            },
            {
            "name": "Cheese Plate",
            "price": 130,
            "image": "../images/food/img20.jpg",
            "category": "Appetizers"
            },
            {
            "name": "Vegetable Soup",
            "price": 500,
            "image": "../images/food/img21.jpg",
            "category": "Soups"
            },
            {
            "name": "Tiramisu",
            "price": 700,
            "image": "../images/food/img22.jpg",
            "category": "Desserts"
            },
            {
            "name": "Beef Stroganoff",
            "price": 1200,
            "image": "../images/food/img23.jpg",
            "category": "Entrees"
            },
            {
            "name": "Pad Thai",
            "price": 1000,
            "image": "../images/food/img24.jpg",
            "category": "Noodles"
            },
            {
            "name": "Cobb Salad",
            "price": 900,
            "image": "../images/food/img25.jpg",
            "category": "Salads"
            },
            {
            "name": "Vegetarian Pizza",
            "price": 1100,
            "image": "../images/food/img26.jpg",
            "category": "Pizza"
            },
            {
            "name": "Lobster Bisque",
            "price": 800,
            "image": "../images/food/img1.jpg",
            "category": "Soups"
            },
            {
            "name": "Tuna Tartare",
            "price": 1400,
            "image": "../images/food/img2.jpg",
            "category": "Appetizers"
            },
            {
            "name": "Beef Burrito",
            "price": 1100,
            "image": "../images/food/img3.jpg",
            "category": "Burritos"
            },
            {
            "name": "Chicken Fried Rice",
            "price": 900,
            "image": "../images/food/img4.jpg",
            "category": "Rice Dishes"
            },
            {
            "name": "Key Lime Pie",
            "price": 600,
            "image": "../images/food/img5.jpg",
            "category": "Desserts"
            },
            {
            "name": "Sushi Combo Platter",
            "price": 1600,
            "image": "../images/food/img6.jpg",
            "category": "Sushi"
            },
            {
            "name": "French Onion Soup",
            "price": 700,
            "image": "../images/food/img7.jpg",
            "category": "Soups"
            },
            {
            "name": "Pulled Pork Sandwich",
            "price": 900,
            "image": "../images/food/img8.jpg",
            "category": "Sandwiches"
            },
            {
            "name": "Fettuccine Alfredo",
            "price": 1100,
            "image": "../images/food/img9.jpg",
            "category": "Pasta"
            },
            {
            "name": "Beef Empanadas",
            "price": 800,
            "image": "../images/food/img10.jpg",
            "category": "Appetizers"
            },
            {
            "name": "Veggie Burger",
            "price": 1000,
            "image": "../images/food/img11.jpg",
            "category": "Burgers"
            },
            {
            "name": "Clam Chowder",
            "price": 800,
            "image": "../images/food/img12.jpg",
            "category": "Soups"
            },
            {
            "name": "Fajitas",
            "price": 1300,
            "image": "../images/food/img13.jpg",
            "category": "Mexican"
            },
            {
            "name": "Steak",
            "price": 1900,
            "image": "../images/food/img14.jpg",
            "category": "Entrees"
            },
            {
            "name": "Chicken Tenders",
            "price": 800,
            "image": "../images/food/img15.jpg",
            "category": "Appetizers"
            },
            {
            "name": "Vegetable Tempura",
            "price": 900,
            "image": "../images/food/img16.jpg",
            "category": "Appetizers"
            },
            {
            "name": "Mango Sticky Rice",
            "price": 659,
            "image": "../images/food/img17.jpg",
            "category": "Desserts"
              },
              {
                "name": "Gourmet Mac and Cheese",
                "price": 1000,
                "image": "../images/food/img18.jpg",
                "category": "Mac and Cheese"
              },
              {
                "name": "California Roll",
                "price": 900,
                "image": "../images/food/img19.jpg",
                "category": "Sushi"
              },
              {
                "name": "Lemon Pepper Chicken",
                "price": 1200,
                "image": "../images/food/img20.jpg",
                "category": "Entrees"
              },
              {
                "name": "Vegetarian Wrap",
                "price": 800,
                "image": "../images/food/img21.jpg",
                "category": "Wraps"
              },
              {
                "name": "Chicken Shawarma",
                "price": 1000,
                "image": "../images/food/img22.jpg",
                "category": "Middle Eastern"
              },
              {
                "name": "Stuffed Mushrooms",
                "price": 700,
                "image": "../images/food/img23.jpg",
                "category": "Appetizers"
              }
      ]
}
  
document.addEventListener("DOMContentLoaded", function() {



    const productContainer = document.getElementById('product-container');

    const productsHTML = data.products.map(product => `
        <div class="product">
            <img src="${product.image}">
             <h2>${product.name}</h2>
            <p>Price:Rs${product.price}</p>
        </div>
    `);
    productContainer.innerHTML = productsHTML.join('');
});

function populateComboBox(data) {
  const categorySelect = document.getElementById('combo-box');
  const categories = [...new Set(data.products.map(item => item.category))]; 
  categories.sort();
  categories.forEach(category => {
      const option = document.createElement('option');
      option.value = category;
      option.text = category;
      categorySelect.appendChild(option);
  });
}

populateComboBox(data);

const table = $('#billingTable').DataTable({
  paging: false, 
  searching: false, 
  ordering: false 
});

let cart = [];

function addToCart(name, price) {

    let existingItem = cart.find(item => item.name === name);

    if (existingItem) {
        existingItem.quantity++;
        existingItem.total = existingItem.quantity * price;
    } else {
        cart.push({
            name: name,
            price: price,
            quantity: 1,
            total: price
        });
    }

    updateCart();
    
}

function updateCart() {
  const cartBody = document.getElementById('cart-items');
  cartBody.innerHTML = ''; 

  for (let index = cart.length - 1; index >= 0; index--) {
      const item = cart[index];
      const serialNumber = cart.length - index; 

      const cartRow = document.createElement('tr');
      cartRow.innerHTML = `
          <td>${serialNumber}</td>
          <td>${item.name}</td>
          <td><input type="number" readonly min="1" value="${item.quantity}" onchange="updateQuantity(${index}, this.value)" id="qty-input"></td>
          <td id="item-price">$${item.price.toFixed(2)}</td>
          <td id="item-total">$${item.total.toFixed(2)}</td>
          <td><button class="remove" onclick="removeItem(${index})"><i class="fa-solid fa-trash"></i></button></td>
      `;
      cartBody.appendChild(cartRow);
  }

  updatebilltotal();
}


function updateQuantity(index, newQuantity) {
    const parsedQuantity = parseInt(newQuantity);
    if (!isNaN(parsedQuantity) && parsedQuantity >= 1) {
        cart[index].quantity = parsedQuantity;
        cart[index].total = cart[index].quantity * cart[index].price;

        updateCart();
    } else {
        alert('Please enter a valid quantity.');
    }
}

document.addEventListener("DOMContentLoaded", function() {
    const productElements = document.querySelectorAll('.product');

    productElements.forEach((productElement, index) => {
        productElement.addEventListener('click', () => {
            const productName = data.products[index].name;
            const productPrice = data.products[index].price;

            addToCart(productName, productPrice);
        });
    });
});

function updatebilltotal(){
  grandtotal=0;
  for (let i = 0; i < cart.length; i++) {
    grandtotal = grandtotal + cart[i].total;
}
  document.getElementById("billtotal").value=grandtotal.toFixed();
}


